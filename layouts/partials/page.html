<div id="content">
  {{ $type := "text" }}
  {{ if .Params.postType }}
    {{ $type = .Params.postType }}
  {{ end }}
  <div class="post {{ $type }}">
    {{ if and .Params.postType (eq .Params.postType "video") }}
      <div class="wide">
        <div class="videoWrapper">
          <iframe width="700" height="394" id="youtube_iframe" src="{{ .Params.videoSrc }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
      </div>
    {{ end }}
      <div class="narrow">
        {{ $title := .Title }}
        {{ if and .Params.postType (eq .Params.postType "link") }}
          {{ $title = printf "<a href=\"%s\">%s</a>" .Params.linkTarget .Params.linkTitle | safeHTML }}
        {{ end }}
        {{ if or (not .Params.postType) (ne .Params.postType "video") }}
          <div class="title">
            <h1>{{ $title }}</h1>
          </div>
        {{ end }}
        <div class="caption">
          {{ .Content }}
        </div>
        {{/* Include PDF viewer */}}
        {{ if (.Resources) }}
            {{ with .Page.Resources.GetMatch "viewer" }}
                {{ $divId := printf "viewer-%s" (delimit (shuffle (seq 1 9)) "") }}
                <div class="viewer">
                    {{ $pdfObjectLib := resources.Get "js/pdfobject/pdfobject.js" }}
                    {{ $js := slice $pdfObjectLib | resources.Concat "js/pdf.js" | minify | fingerprint }}
                    <script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}"></script>
                    <div id="{{- $divId -}}"></div>
                    <script type="text/javascript">
                        var options = {
                        	pdfOpenParams: {
                        		navpanes: 1,
                        		toolbar: 1,
                        		statusbar: 1,
                                scrollbar: 1,
                        		view: "FitH"
                        	},
                        	//forcePDFJS: true,
                        	PDFJS_URL: "/js/pdfjs/web/viewer.html"
                        };

                        var myPDF = PDFObject.embed("{{ .Permalink }}", "#{{- $divId -}}", options);
                    </script>
                </div>
                <div class="share">
                    <a href="{{ .Name }}" class="pdf-link">PDF Download</a>
                </div>
            {{ end }}
        {{ end }}
        {{ if not (hasPrefix .Page.File.Path "about") }}
          <div class="metadata">
            <div class="date">
              <a href="{{ .RelPermalink }}">
                {{- partial "date.html" (dict "date" .Date "language" $.Page.Language "months" $.Site.Data.months) -}}
              </a>
              {{ if .Params.tumblr_url }}
                <span class="tumblr-url">
                  <a href="{{ .Params.tumblr_url }}">Original auf Tumblr</a>
                </span>
              {{ end }}
            </div>
          </div>
        {{ end }}
      </div>
    </div>
</div>
